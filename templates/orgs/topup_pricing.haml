-extends "smartmin/list.html"

-load humanize
-load smartmin
-load i18n

-block table-buttons

-block extra-style
  :css
    #btn-save {
      padding: 3px 10px;
      margin-bottom: 10px;
    }
    label h3 {
      margin-top: 0px;
      margin-bottom: 0px;
    }

    .topup {
      margin-bottom: 10px;
      padding-bottom: 10px;
      border-bottom: 1px solid #ccc;
    }

    .topup.expired {
      border-bottom: 1px solid rgb(178, 23, 26);
    }

    .topup.expiring {
      border-bottom: 1px solid #e68628;
    }

    .topup-price {
      float: right;
      font-size: 20px;
    }

    .topup-credits {
      font-size: 20px;
    }

    .topup-history {
      margin-top: 5px;
      font-style: italic;
    }

    .topup-expires {
      margin-top: 5px;
      float: right;
      font-style: italic;
    }

    .topup.expired > .topup-expires {
      color: rgb(178, 23, 26);
    }

    .topup.expiring > .topup-expires {
      color: #e68628;
    }

    .title-icon + .title-text {
      margin-left: 65px;
    }

    .topup-status {
      padding: 10px;
      margin-bottom: 30px;
      border: 1px solid #ccc;
    }

    .topup-status.interrupted {
      border: 1px solid rgb(178, 23, 26);
      color: rgb(178, 23, 26);
    }

    .bundle{
      border: 1px solid #ccc;
      margin-top: 20px;
      padding-bottom: 10px;
    }

    .bundle-size{
      text-align: center;
      background: #eee;
    }

    .bundle-size h3{
      margin-bottom: 0px;
      margin-top: 0px;
    }

    .bundle-size h6{
      text-align: center;
      margin-top: -10px;
      font-weight: 200;
    }

    .bundle-price{
      font-size: 24px;
      font-weight: 700;
      text-align: center;
      margin-top: 20px;
    }

    .bundle-per-credit{
      text-align: center;
      margin-top: 5px;
    }

    .bundle-buy{
      text-align: center;
      padding-top: 10px;
    }

-block title-icon
  .title-icon
    %span.glyph.icon-coins

-block title-text
  .title-text
    %h1
      -trans "Pricing"

-block paginator

-block table
  -with user_org.get_credits_remaining as credits
    -if credits < 0
      .topup-status.interrupted
        -trans "Your service is interrupted. You have"
        {{ credits|intcomma }}
        -trans "credits and must add more to resume your service."

    -else
      -if credits < 500
        .topup-status.interrupted
          -trans "You have"
          {{ credits|intcomma }}
          -trans "credits remaining. Top up early to prevent any disruption in your service."
      -else
        .topup-status
          -trans "You have"
          {{ credits|intcomma }}
          -trans "credits remaining. Top up early to prevent any disruption in your service."

      .row.bundles
        .span4
          .bundle
            .bundle-size
              %h3
                1000
              %h6
                credits
            .bundle-price
              R$ 99,00
            .bundle-per-credit
              0,11 each
            .bundle-buy
              %form{ action: "", method: "POST" }
                -csrf_token
                %input{ value: "basic", type: "hidden", name: "plan"}
                %input.btn.btn-primary.bundle-button{ type: "submit", value: "Subscribe" }

        .span4
          .bundle
            .bundle-size
              %h3
                3000
              %h6
                credits
            .bundle-price
              R$ 159,99
            .bundle-per-credit
              0,10 each
            .bundle-buy
              %form{ action: "", method: "POST" }
                -csrf_token
                %input{ value: "master", type: "hidden", name: "plan"}
                %input.btn.btn-primary.bundle-button{ type: "submit", value: "Subscribe" }

        .span4
          .bundle
            .bundle-size
              %h3
                10000
              %h6
                credits
            .bundle-price
              R$ 199,90
            .bundle-per-credit
              0,09 each
            .bundle-buy
              %form{ action: "", method: "POST" }
                -csrf_token
                %input{ value: "premium", type: "hidden", name: "plan"}
                %input.btn.btn-primary.bundle-button{ type: "submit", value: "Subscribe" }
